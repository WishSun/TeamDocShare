# 团队文档共享系统服务器前台设计  
![](https://i.imgur.com/Qb9Zs05.png) 
## 注解:  
1. **从配置文件获取IP地址和端口号**  
   调用解析配置文件模块，解析出配置文件中IP地址和端口号  

2. **创建大小任务线程池单例对象**  
   任务分大小，小任务的线程池中线程较少，但任务链表较长; 大任务线程池中线程较多，而且任务链表较短，因为大任务比较耗时，为了更快的轮转去执行，所以使其任务链表短一些，就会使得任务的轮转周期短一些。

3. **创建监听套接字并绑定地址和端口，开始监听**  
   调用socket、bind、listen这些函数。  

4. **创建epoll事件监听集合，并将监听套接字加入**  
   创建epoll集合，监听监听套接字描述符的EPOLLIN事件，即新客户端连接  

5. **进行epoll_wait调用，等待监听事件的发生，等来的事件分三种 :**
  
	- **新连接到来：**
		- 监听套接字描述符就绪，当接受到新连接时，就将其添加到epoll监听集合，并监听其EPOLLIN事件，并将事件触发模式设置为ET边沿触发。
		
	- **客户端请求到来 :** 
		- 交由请求处理模块处理
		
	- **异常情况**  
		- 包括EPOLLRDHUP、EPOLLHUP以及EPOLLERR, 所做的处理很简单，就是关闭出错的描述符，并将其从epoll监听集合中移除。